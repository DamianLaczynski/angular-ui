<ui-field
  [fieldType]="'switch'"
  [placeholder]="placeholder()"
  [helpText]="helpText()"
  [(errorText)]="errorText"
  [required]="required()"
  [disabled]="disabled()"
  [readonly]="readonly()"
  [autocomplete]="autocomplete()"
  [id]="id()"
  [name]="name()"
  [size]="size()"
  [variant]="variant()"
>
  <div class="switch-wrapper" [ngClass]="switchClasses">
    <!-- Label Above -->
    @if (label() && labelPosition() === 'above') {
      <div class="switch-label-above">
        <span [ngClass]="labelClasses"> {{ label() }} </span>
      </div>
    }

    <label class="switch-container">
      <!-- Label Before -->
      @if (label() && labelPosition() === 'before') {
        <span [ngClass]="labelClasses" class="switch-label-before"> {{ label() }} </span>
      }

      <!-- Hidden native checkbox for accessibility and form integration -->
      <input
        type="checkbox"
        [id]="id()"
        [name]="name()"
        [checked]="isChecked"
        [disabled]="disabled()"
        [attr.aria-label]="ariaLabel() || label()"
        [attr.aria-describedby]="ariaDescribedBy()"
        [attr.required]="required() ? true : null"
        class="switch-input"
        (change)="onSwitchChange($event)"
        (focus)="onFocus($event)"
        (blur)="onBlur($event)"
        (click)="onSwitchClick($event)"
      />

      <!-- Visual switch element -->
      <div class="switch-visual">
        <!-- Unchecked State -->
        @if (isUnchecked) {
          <svg
            width="56"
            height="36"
            viewBox="0 0 56 36"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            class="switch-svg"
          >
            <mask id="path-1-inside-unchecked" fill="white">
              <path
                d="M8 18C8 12.4772 12.4772 8 18 8H38C43.5228 8 48 12.4772 48 18C48 23.5228 43.5228 28 38 28H18C12.4772 28 8 23.5228 8 18Z"
              />
            </mask>
            <path
              d="M18 8V9H38V8V7H18V8ZM38 28V27H18V28V29H38V28ZM18 28V27C13.0294 27 9 22.9706 9 18H8H7C7 24.0751 11.9249 29 18 29V28ZM48 18H47C47 22.9706 42.9706 27 38 27V28V29C44.0751 29 49 24.0751 49 18H48ZM38 8V9C42.9706 9 47 13.0294 47 18H48H49C49 11.9249 44.0751 7 38 7V8ZM18 8V7C11.9249 7 7 11.9249 7 18H8H9C9 13.0294 13.0294 9 18 9V8Z"
              class="switch-stroke"
              mask="url(#path-1-inside-unchecked)"
            />
            <circle cx="18" cy="18" r="7" class="switch-thumb" />
          </svg>
        }

        <!-- Checked State -->
        @if (isChecked) {
          <svg
            width="56"
            height="36"
            viewBox="0 0 56 36"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            class="switch-svg"
          >
            <path
              d="M8 18C8 12.4772 12.4772 8 18 8H38C43.5228 8 48 12.4772 48 18C48 23.5228 43.5228 28 38 28H18C12.4772 28 8 23.5228 8 18Z"
              class="switch-background"
            />
            <circle cx="38" cy="18" r="7" class="switch-thumb-checked" />
          </svg>
        }
      </div>

      <!-- Label After -->
      @if (label() && labelPosition() === 'after') {
        <span [ngClass]="labelClasses" class="switch-label-after"> {{ label() }} </span>
      }
    </label>

    <!-- Label Below -->
    @if (label() && labelPosition() === 'below') {
      <div class="switch-label-below">
        <span [ngClass]="labelClasses"> {{ label() }} </span>
      </div>
    }
  </div>
</ui-field>
