// ==========================================================================
// Toast Component - Fluent 2 Design System
// ==========================================================================
// Variants: primary, secondary, success, warning, danger, info
// Appearances: tint (default), filled, outline, subtle, transparent
// Sizes: small, medium, large
// Positions: top-left, top-center, top-right, bottom-left, bottom-center, bottom-right

@use '../utils/variables' as *;
@use '../utils/mixins' as *;

// ==========================================================================
// Toast Container
// ==========================================================================

.toast-container {
  position: fixed;
  z-index: $z-index-tooltip;
  pointer-events: none;
  display: flex;
  flex-direction: column;
  gap: $spacing-2;
}

// Container Positions
.toast-container--top-left {
  top: $spacing-4;
  left: $spacing-4;
}

.toast-container--top-center {
  top: $spacing-4;
  left: 50%;
  transform: translateX(-50%);
}

.toast-container--top-right {
  top: $spacing-4;
  right: $spacing-4;
}

.toast-container--bottom-left {
  bottom: $spacing-4;
  left: $spacing-4;
}

.toast-container--bottom-center {
  bottom: $spacing-4;
  left: 50%;
  transform: translateX(-50%);
}

.toast-container--bottom-right {
  bottom: $spacing-4;
  right: $spacing-4;
}

// ==========================================================================
// Base Toast
// ==========================================================================

.toast {
  position: relative;
  display: flex;
  align-items: flex-start;
  gap: $spacing-3;
  padding: $spacing-4;
  margin-bottom: $spacing-2;
  border-radius: $border-radius-400;
  box-shadow: $elevation-8;
  background-color: var(--color-neutral-background-rest);
  border: 1px solid transparent;
  color: var(--color-neutral-foreground-rest);
  font-family: $font-family-base;
  max-width: 400px;
  min-width: 300px;
  z-index: $z-index-tooltip;
  pointer-events: auto;
  box-sizing: border-box;
  @include transition-colors($duration-normal);
  @include transition-transform($duration-normal);

  @include focus-ring;

  &:hover {
    box-shadow: $elevation-16;
    transform: translateY(-1px);
  }

  // Progress bar
  &::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 2px;
    background-color: var(--color-brand-primary);
    border-radius: 0 0 $border-radius-400 $border-radius-400;
    transform-origin: left;
    @include scale-x-out(var(--toast-progress-duration, 5000ms));
  }

  &__icon {
    display: flex;
    flex-shrink: 0;
    width: 20px;
    height: 20px;
  }

  &__content {
    flex: 1;
    min-width: 0;
  }

  &__title {
    font-weight: $font-weight-semibold;
    margin-bottom: $spacing-1;
  }

  &__message {
    color: var(--color-neutral-foreground-rest);
  }

  &__actions {
    display: flex;
    gap: $spacing-1;
    flex-shrink: 0;
  }

  &--filled .toast__dismiss .button.button--transparent {
    color: inherit;

    &:hover:not(.button--disabled),
    &:active:not(.button--disabled),
    &.button--pressed:not(.button--disabled) {
      color: inherit;
    }
  }
}

// ==========================================================================
// Sizes
// ==========================================================================

.toast--small {
  padding: $spacing-3 $spacing-4;
  min-width: 250px;
  max-width: 350px;

  .toast__title,
  .toast__message {
    font-size: $font-size-200;
  }
}

.toast--medium {
  padding: $spacing-4;
  min-width: 300px;
  max-width: 400px;

  .toast__title,
  .toast__message {
    font-size: $font-size-300;
  }
}

.toast--large {
  padding: $spacing-5;
  min-width: 350px;
  max-width: 450px;

  .toast__title,
  .toast__message {
    font-size: $font-size-400;
  }
}

// ==========================================================================
// States
// ==========================================================================

.toast--hidden {
  opacity: 0;
  pointer-events: none;
  transform: translateX(100%);
}

.toast--no-progress {
  &::after {
    display: none;
  }
}

// ==========================================================================
// PRIMARY VARIANT
// ==========================================================================

// Primary Tint (default)
.toast--primary,
.toast--primary.toast--tint {
  background-color: var(--color-neutral-background-brand-selected);

  &::after {
    background-color: var(--color-brand-primary);
  }

  .toast__icon {
    color: var(--color-brand-primary);
  }
}

// Primary Filled
.toast--primary.toast--filled {
  color: var(--color-neutral-foreground-on-brand);
  background-color: var(--color-brand-primary);
  border-color: var(--color-brand-primary);

  &::after {
    background-color: var(--color-neutral-foreground-on-brand);
    opacity: 0.5;
  }

  .toast__icon,
  .toast__title {
    color: var(--color-neutral-foreground-on-brand);
  }

  .toast__message {
    color: var(--color-neutral-foreground-on-brand);
    opacity: 0.9;
  }
}

// Primary Outline
.toast--primary.toast--outline {
  background-color: var(--color-neutral-background-rest);
  border: 2px solid var(--color-brand-primary);

  &::after {
    background-color: var(--color-brand-primary);
  }

  .toast__icon,
  .toast__title {
    color: var(--color-brand-primary);
  }
}

// Primary Subtle
.toast--primary.toast--subtle {
  background-color: var(--color-neutral-background-rest);
  border: 1px solid var(--color-neutral-stroke-rest);
  box-shadow: $elevation-4;

  &::after {
    background-color: var(--color-brand-primary);
  }

  .toast__icon {
    color: var(--color-brand-primary);
  }

  &:hover {
    box-shadow: $elevation-8;
  }
}

// Primary Transparent
.toast--primary.toast--transparent {
  background-color: transparent;
  border-color: transparent;
  box-shadow: none;
  color: var(--color-brand-primary);

  &::after {
    background-color: var(--color-brand-primary);
  }

  .toast__icon,
  .toast__title {
    color: var(--color-brand-primary);
  }

  .toast__message {
    color: var(--color-brand-primary);
    opacity: 0.8;
  }
}

// ==========================================================================
// SECONDARY VARIANT
// ==========================================================================

// Secondary Tint (default)
.toast--secondary,
.toast--secondary.toast--tint {
  background-color: var(--color-neutral-background2-rest);

  &::after {
    background-color: var(--color-neutral-foreground-rest);
  }

  .toast__icon {
    color: var(--color-neutral-foreground-rest);
  }
}

// Secondary Filled
.toast--secondary.toast--filled {
  color: var(--color-neutral-foreground-rest);
  background-color: var(--color-neutral-background2-rest);
  border-color: transparent;

  &::after {
    background-color: var(--color-neutral-foreground-rest);
    opacity: 0.5;
  }

  .toast__icon,
  .toast__title {
    color: var(--color-neutral-foreground-rest);
  }

  .toast__message {
    color: var(--color-neutral-foreground-rest);
  }
}

// Secondary Outline
.toast--secondary.toast--outline {
  background-color: var(--color-neutral-background-rest);
  border: 2px solid var(--color-neutral-stroke-rest);

  &::after {
    background-color: var(--color-neutral-foreground-rest);
  }

  .toast__icon,
  .toast__title {
    color: var(--color-neutral-foreground-rest);
  }
}

// Secondary Subtle
.toast--secondary.toast--subtle {
  background-color: var(--color-neutral-background-rest);
  border: 1px solid var(--color-neutral-stroke-rest);
  box-shadow: $elevation-4;

  &::after {
    background-color: var(--color-neutral-foreground-rest);
  }

  .toast__icon {
    color: var(--color-neutral-foreground-rest);
  }

  &:hover {
    box-shadow: $elevation-8;
  }
}

// Secondary Transparent
.toast--secondary.toast--transparent {
  background-color: transparent;
  border-color: transparent;
  box-shadow: none;
  color: var(--color-neutral-foreground-rest);

  &::after {
    background-color: var(--color-neutral-foreground-rest);
  }

  .toast__icon,
  .toast__title {
    color: var(--color-neutral-foreground-rest);
  }

  .toast__message {
    color: var(--color-neutral-foreground-rest);
    opacity: 0.8;
  }
}

// ==========================================================================
// SUCCESS VARIANT
// ==========================================================================

// Success Tint (default)
.toast--success,
.toast--success.toast--tint {
  background-color: var(--color-shared-green-background);

  &::after {
    background-color: var(--color-shared-green-foreground);
  }

  .toast__icon {
    color: var(--color-shared-green-foreground);
  }
}

// Success Filled
.toast--success.toast--filled {
  color: var(--color-neutral-foreground-on-brand);
  background-color: var(--color-shared-green-foreground);
  border-color: var(--color-shared-green-foreground);

  &::after {
    background-color: var(--color-neutral-foreground-on-brand);
    opacity: 0.5;
  }

  .toast__icon,
  .toast__title {
    color: var(--color-neutral-foreground-on-brand);
  }

  .toast__message {
    color: var(--color-neutral-foreground-on-brand);
    opacity: 0.9;
  }
}

// Success Outline
.toast--success.toast--outline {
  background-color: var(--color-neutral-background-rest);
  border: 2px solid var(--color-shared-green-foreground);

  &::after {
    background-color: var(--color-shared-green-foreground);
  }

  .toast__icon,
  .toast__title {
    color: var(--color-shared-green-foreground);
  }
}

// Success Subtle
.toast--success.toast--subtle {
  background-color: var(--color-neutral-background-rest);
  border: 1px solid var(--color-neutral-stroke-rest);
  box-shadow: $elevation-4;

  &::after {
    background-color: var(--color-shared-green-foreground);
  }

  .toast__icon {
    color: var(--color-shared-green-foreground);
  }

  &:hover {
    box-shadow: $elevation-8;
  }
}

// Success Transparent
.toast--success.toast--transparent {
  background-color: transparent;
  border-color: transparent;
  box-shadow: none;
  color: var(--color-shared-green-foreground);

  &::after {
    background-color: var(--color-shared-green-foreground);
  }

  .toast__icon,
  .toast__title {
    color: var(--color-shared-green-foreground);
  }

  .toast__message {
    color: var(--color-shared-green-foreground);
    opacity: 0.8;
  }
}

// ==========================================================================
// WARNING VARIANT
// ==========================================================================

// Warning Tint (default)
.toast--warning,
.toast--warning.toast--tint {
  background-color: var(--color-shared-orange-background);

  &::after {
    background-color: var(--color-shared-orange-foreground);
  }

  .toast__icon {
    color: var(--color-shared-orange-foreground);
  }
}

// Warning Filled
.toast--warning.toast--filled {
  color: var(--color-neutral-foreground-on-brand);
  background-color: var(--color-shared-orange-foreground);
  border-color: var(--color-shared-orange-foreground);

  &::after {
    background-color: var(--color-neutral-foreground-on-brand);
    opacity: 0.5;
  }

  .toast__icon,
  .toast__title {
    color: var(--color-neutral-foreground-on-brand);
  }

  .toast__message {
    color: var(--color-neutral-foreground-on-brand);
    opacity: 0.9;
  }
}

// Warning Outline
.toast--warning.toast--outline {
  background-color: var(--color-neutral-background-rest);
  border: 2px solid var(--color-shared-orange-foreground);

  &::after {
    background-color: var(--color-shared-orange-foreground);
  }

  .toast__icon,
  .toast__title {
    color: var(--color-shared-orange-foreground);
  }
}

// Warning Subtle
.toast--warning.toast--subtle {
  background-color: var(--color-neutral-background-rest);
  border: 1px solid var(--color-neutral-stroke-rest);
  box-shadow: $elevation-4;

  &::after {
    background-color: var(--color-shared-orange-foreground);
  }

  .toast__icon {
    color: var(--color-shared-orange-foreground);
  }

  &:hover {
    box-shadow: $elevation-8;
  }
}

// Warning Transparent
.toast--warning.toast--transparent {
  background-color: transparent;
  border-color: transparent;
  box-shadow: none;
  color: var(--color-shared-orange-foreground);

  &::after {
    background-color: var(--color-shared-orange-foreground);
  }

  .toast__icon,
  .toast__title {
    color: var(--color-shared-orange-foreground);
  }

  .toast__message {
    color: var(--color-shared-orange-foreground);
    opacity: 0.8;
  }
}

// ==========================================================================
// DANGER VARIANT
// ==========================================================================

// Danger Tint (default)
.toast--danger,
.toast--danger.toast--tint {
  background-color: var(--color-shared-red-background);

  &::after {
    background-color: var(--color-shared-red-foreground);
  }

  .toast__icon {
    color: var(--color-shared-red-foreground);
  }
}

// Danger Filled
.toast--danger.toast--filled {
  color: var(--color-neutral-foreground-on-brand);
  background-color: var(--color-shared-red-foreground);
  border-color: var(--color-shared-red-foreground);

  &::after {
    background-color: var(--color-neutral-foreground-on-brand);
    opacity: 0.5;
  }

  .toast__icon,
  .toast__title {
    color: var(--color-neutral-foreground-on-brand);
  }

  .toast__message {
    color: var(--color-neutral-foreground-on-brand);
    opacity: 0.9;
  }
}

// Danger Outline
.toast--danger.toast--outline {
  background-color: var(--color-neutral-background-rest);
  border: 2px solid var(--color-shared-red-foreground);

  &::after {
    background-color: var(--color-shared-red-foreground);
  }

  .toast__icon,
  .toast__title {
    color: var(--color-shared-red-foreground);
  }
}

// Danger Subtle
.toast--danger.toast--subtle {
  background-color: var(--color-neutral-background-rest);
  border: 1px solid var(--color-neutral-stroke-rest);
  box-shadow: $elevation-4;

  &::after {
    background-color: var(--color-shared-red-foreground);
  }

  .toast__icon {
    color: var(--color-shared-red-foreground);
  }

  &:hover {
    box-shadow: $elevation-8;
  }
}

// Danger Transparent
.toast--danger.toast--transparent {
  background-color: transparent;
  border-color: transparent;
  box-shadow: none;
  color: var(--color-shared-red-foreground);

  &::after {
    background-color: var(--color-shared-red-foreground);
  }

  .toast__icon,
  .toast__title {
    color: var(--color-shared-red-foreground);
  }

  .toast__message {
    color: var(--color-shared-red-foreground);
    opacity: 0.8;
  }
}

// ==========================================================================
// INFO VARIANT
// ==========================================================================

// Info Tint (default)
.toast--info,
.toast--info.toast--tint {
  background-color: var(--color-shared-blue-background);

  &::after {
    background-color: var(--color-shared-blue-foreground);
  }

  .toast__icon {
    color: var(--color-shared-blue-foreground);
  }
}

// Info Filled
.toast--info.toast--filled {
  color: var(--color-neutral-foreground-on-brand);
  background-color: var(--color-shared-blue-foreground);
  border-color: var(--color-shared-blue-foreground);

  &::after {
    background-color: var(--color-neutral-foreground-on-brand);
    opacity: 0.5;
  }

  .toast__icon,
  .toast__title {
    color: var(--color-neutral-foreground-on-brand);
  }

  .toast__message {
    color: var(--color-neutral-foreground-on-brand);
    opacity: 0.9;
  }
}

// Info Outline
.toast--info.toast--outline {
  background-color: var(--color-neutral-background-rest);
  border: 2px solid var(--color-shared-blue-foreground);

  &::after {
    background-color: var(--color-shared-blue-foreground);
  }

  .toast__icon,
  .toast__title {
    color: var(--color-shared-blue-foreground);
  }
}

// Info Subtle
.toast--info.toast--subtle {
  background-color: var(--color-neutral-background-rest);
  border: 1px solid var(--color-neutral-stroke-rest);
  box-shadow: $elevation-4;

  &::after {
    background-color: var(--color-shared-blue-foreground);
  }

  .toast__icon {
    color: var(--color-shared-blue-foreground);
  }

  &:hover {
    box-shadow: $elevation-8;
  }
}

// Info Transparent
.toast--info.toast--transparent {
  background-color: transparent;
  border-color: transparent;
  box-shadow: none;
  color: var(--color-shared-blue-foreground);

  &::after {
    background-color: var(--color-shared-blue-foreground);
  }

  .toast__icon,
  .toast__title {
    color: var(--color-shared-blue-foreground);
  }

  .toast__message {
    color: var(--color-shared-blue-foreground);
    opacity: 0.8;
  }
}

// ==========================================================================
// Animations
// ==========================================================================

// Animation classes
.toast--slide-in-left {
  @include slide-in-left($duration-normal, $easing-decelerate-mid);
}

.toast--slide-in-right {
  @include slide-in-right($duration-normal, $easing-decelerate-mid);
}

.toast--slide-in-top {
  @include slide-in-top($duration-normal, $easing-decelerate-mid);
}

.toast--slide-in-bottom {
  @include slide-in-bottom($duration-normal, $easing-decelerate-mid);
}

// ==========================================================================
// Responsive
// ==========================================================================

@media (max-width: $breakpoint-small) {
  .toast {
    min-width: 280px;
    max-width: calc(100vw - #{$spacing-8});
  }

  .toast-container--top-left,
  .toast-container--top-right,
  .toast-container--bottom-left,
  .toast-container--bottom-right {
    left: $spacing-2;
    right: $spacing-2;
  }
}
