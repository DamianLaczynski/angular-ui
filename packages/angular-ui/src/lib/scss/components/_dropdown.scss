// =============================================================================
// Dropdown Component Styles (Fluent 2 Design System)
// =============================================================================

@use '../utils/variables' as *;
@use '../utils/mixins' as *;
@use '../utils/functions' as *;

// =============================================================================
// Dropdown Trigger (uses .input class from _input.scss)
// =============================================================================

.dropdown-trigger {
  display: flex !important;
  align-items: center;
  gap: $spacing-1;
  cursor: pointer;
  user-select: none;
  padding-right: $spacing-2 !important; // Override input padding for chevron space

  // Focus state - Fluent 2 Design System
  // Dropdown trigger używa input-wrapper, który ma własny focus indicator
  &:focus {
    outline: none;
  }

  &:focus-visible {
    outline: none; // Focus jest obsługiwany przez input-wrapper
  }
}

.dropdown-display-text {
  flex: 1;
  text-overflow: ellipsis;
  white-space: nowrap;
  min-width: 0; // Important for text-overflow to work in flex
}

.dropdown-placeholder {
  color: var(--color-neutral-foreground2-rest);
  opacity: 0.8;
}

.dropdown-tags-container {
  flex: 1;
  display: flex;
  flex-wrap: wrap;
  gap: $spacing-1;
  align-items: center;
  min-width: 0; // Important for text-overflow to work in flex
  overflow: hidden;
}

// =============================================================================
// Dropdown Panel
// =============================================================================

// Dropdown Panel (rendered via CDK Overlay)
.dropdown-panel {
  background: var(--color-neutral-background-rest);
  border-radius: $border-radius-400;
  box-shadow:
    0px 0px 2px rgba(0, 0, 0, 0.12),
    0px 8px 16px rgba(0, 0, 0, 0.14);
  width: 100%; // ← Panel wypełnia cały overlay-pane
  display: flex;
  flex-direction: column;
  overflow: hidden;
  @include slide-down($duration-normal, $easing-decelerate-min);

  // Compact mode nie potrzebuje min-width tutaj
  // Bo overlay-pane dostaje odpowiednią szerokość z config

  // =============================================================================
  // Search Input
  // =============================================================================

  &__search {
    padding: $spacing-2;
    border-bottom: 1px solid var(--color-neutral-stroke-rest);
    flex-shrink: 0;
  }

  // =============================================================================
  // Items List
  // =============================================================================

  &__list {
    padding: $spacing-1;
    overflow-y: auto;
    overflow-x: hidden;
    flex: 1;
    min-height: 0;
    display: flex;
    flex-direction: column;
  }

  ui-scroll-container {
    flex: 1;
    min-height: 0;
    display: flex;
    flex-direction: column;

    ui-scroll-panel {
      flex: 1;
      min-height: 0;
      display: flex;
      flex-direction: column;

      .scroll-panel__content {
        max-height: 100%;
      }
    }
  }

  // =============================================================================
  // List Items
  // Note: Regular items are now rendered using NodeComponent
  // =============================================================================

  &__item-header {
    flex: 1 1 0;
    padding: $spacing-2 6px;
    color: var(--color-neutral-foreground2-rest);
    font-size: $font-size-200;
    font-weight: $font-weight-semibold;
    line-height: $line-height-200;
    display: flex;
    justify-content: center;
    flex-direction: column;
  }

  // =============================================================================
  // Divider
  // =============================================================================

  &__divider {
    height: 1px;
    margin: $spacing-1 0;
    background: var(--color-neutral-stroke-rest);
  }

  // =============================================================================
  // Empty State
  // =============================================================================

  &__empty {
    padding: $spacing-4;
    text-align: center;
    color: var(--color-neutral-foreground2-rest);
    font-size: $font-size-300;
    line-height: $line-height-300;
  }

  // Active item styling (keyboard navigation focus)
  &__item--active {
    background: var(--color-neutral-background-hover);
    @include focus-ring(-2px, $border-radius-400);
  }

  ui-node {
    *:focus,
    *:focus-visible {
      outline: none !important;
      outline-offset: 0 !important;
    }
  }
}
